<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>MyConnectome Data Visualization</title>
<!-- JQuery for Bootstrap -->
<script type="text/javascript" src="js/jquery-1.11.1.min.js"></script>
<!-- Bootstrap styling -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap-theme.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/d3.js"></script>
<script type="text/javascript" src="js/d3.layout.js"></script>
<script type="text/javascript" src="js/packages.js"></script>
<!-- MyConnectome Styling -->
<link type="text/css" rel="stylesheet" href="css/style.css"/>
<!-- Mobile touch zooming -->
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
<!-- Navigation Bar / Brand -->
<nav class="navbar navbar-default" role="navigation">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">My Connectome</a>
    </div>
  </div><!-- /.container-fluid -->
</nav>

<!--Controls, saving, etc-->
<div id="controlBox">
  <button class="btn btn-success" id="save_as_svg" value="">Save as SVG</button>
  <button class="btn btn-success" id="save_as_pdf" value="">Save as PDF</button>
  <button class="btn btn-success" id="save_as_png" value="">Save as High-Res PNG</button>
</div>
<!--Here is image box-->
<div id="imageBox">
  <img src="img/dummy.png" width="100px" />
</div>
<!--Here is the title-->
<div id="titleBox">
      <h3>My Connectome</h3>
</div>   

<!-- Stick d3 here-->
<div class="network" id="network">
<fullNetwork>
</div>


<!-- Insert my connectome javascript! -->
<script type="text/javascript" src="js/connectome.js"></script>
<div class="control">
<h3 class="navbar-brand" style="margin-bottom:0px;padding-left:5px">tension</h3>
<input style="padding-left:20px;position:relative;top:3px;" type="range" min="0" max="100" value="85">
</div>
    
<!-- Hidden <FORM> to submit the SVG data to the server, which will convert it to SVG/PDF/PNG downloadable file.
The form is populated and submitted by the JavaScript below. -->
<form id="svgform" method="post" action="download.pl">
<input type="hidden" id="output_format" name="output_format" value="">
<input type="hidden" id="data" name="data" value="">
</form>

<script type="text/javascript">
/*
Utility function: populates the <FORM> with the SVG data
and the requested output format, and submits the form.
*/
function submit_download_form(output_format) {
  
  var svg = document.getElementsByTagName("svg")[0];
  var svg_xml = (new XMLSerializer).serializeToString(svg);
  // Submit the <FORM> to the server.
  // The result will be an attachment file to download.
  var form = document.getElementById("svgform");
  form['output_format'].value = output_format;
  form['data'].value = svg_xml ;
  form.submit();
}

/*
One-time initialization
*/
$(document).ready(function() {
// Attached actions to the buttons
$("#save_as_svg").click(function() { submit_download_form("svg"); });
$("#save_as_pdf").click(function() { submit_download_form("pdf"); });
$("#save_as_png").click(function() { submit_download_form("png"); });
});
</script>

</body>
</html>
